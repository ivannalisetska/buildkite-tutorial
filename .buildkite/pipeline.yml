env: 
 CONCURRENCY_GROUP: "${CONCURRENCY_GROUP:-test_group}"
 QUICKSTART_FILE: "deprecation.sh"
steps:
  - label: "Multiline Command Test"
    command: |
      echo "Testing multiple commands"
      echo "This is a multiline script"
      if [ -z "$BUILDKITE_AGENT_META_DATA_QUEUE" ]; then
        echo "Environment variable is not set"
      else
        echo "Environment variable is set"
      fi
    signature: 
        value: "eyJhbGciOiJFZERTQSIsImtpZCI6InBsZWFzZWQtYmx1ZWJpcmQifQ..TZ06iVLSlYeRMChGCOo2NGL0ElSy9oV-ysaq3sXFJzt37EuswAnX72le838dg0wpkKDec38SKJljqbjhuf7fCg"
        algoritm: "EdDSA"
    agents:
      queue: "mac"

  - label: "Single Line Command Test"
    command: "echo 'Testing single line' && echo 'This should work fine'"
    signature: 
        value: "eyJhbGciOiJFZERTQSIsImtpZCI6InBsZWFzZWQtYmx1ZWJpcmQifQ..TZ06iVLSlYeRMChGCOo2NGL0ElSy9oV-ysaq3sXFJzt37EuswAnX72le838dg0wpkKDec38SKJljqbjhuf7fCg"
        algoritm: "EdDSA"
    agents:
      queue: "mac"

  - label: "Check Quickstart File"
    command: |
      ls -la
      echo "Check if $$QUICKSTART_FILE exists..."
      if [ ! -f "$$QUICKSTART_FILE" ]; then
          echo -e "\033[31m$$QUICKSTART_FILE does not exist\033[0m"
          exit 1
      fi
    agents:
      queue: "mac"
  # Integration of new test scenarios
  - label: "Test Dynamic Var Escaping with Double Dollar"
    commands:
      - "if [[ -z \"$$CONCURRENCY_GROUP\" ]]; then echo \"Error, $$CONCURRENCY_GROUP is empty. Please set this environment variable.\"; exit 1; fi"
      - "cat .buildkite/benchmarking.yml | sed 's/%concurrency_group%/$$CONCURRENCY_GROUP/' | buildkite-agent pipeline upload"
    agents:
      queue: "mac"

  - label: "Test Dynamic Var Escaping with Single Dollar"
    commands:
      - "if [[ -z \"$CONCURRENCY_GROUP\" ]]; then echo \"Error, $CONCURRENCY_GROUP is empty. Please set this environment variable.\"; exit 1; fi"
      - "cat .buildkite/benchmarking.yml | sed 's/%concurrency_group%/$CONCURRENCY_GROUP/' | buildkite-agent pipeline upload"
    agents:
      queue: "mac"
      
      

     
